<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="plantilla/plantilla :: head"></head>
<body>

	<header th:replace="plantilla/plantilla :: header"></header>

	<div class="container py-1 h-100">
		<div
			class="row d-flex justify-content-center align-items-center h-100">
			<div class="col-12 md-8 col-lg-10 col-xl-12">
				<div class="card bg-dark" style="border-radius: 1rem;">
					<div class="card-body p-5 text-center">
						<div class="card-body">
							<div class="row">
								<div class="col-lg-12 mb-4 mb-sm-5">
									<div class="card card-style1 border-0 bg-dark">
										<div class="card-body p-1-9 p-sm-2-3 p-md-6 p-lg-7">
											<div class="row align-items-center">
												<div class="col-lg-6 mb-4 mb-lg-0 ">

													<!-- ---------------------------FOTO -------------------------------------------------->
													<img th:if="${usuario.foto != null}"
														class="img-thumbnail rounded " style="width: 200px;"
														th:src="@{'/uploads/' + ${usuario.foto}}"
														th:alt="${usuario.foto}" />

												</div>
												<!---------------------MOSTRA DATOS USUARIO ----------------------------------------------->
												<div class="col-lg-6 px-xl-10">

													<ul class="list-group mx-auto">
														<li class="list-group-item list-group-item-dark"
															th:text="${usuario.username}"></li>
														<li class="list-group-item list"
															th:text="'Nombre: ' +${usuario.nombre}"></li>
														<li class="list-group-item"
															th:text="'Apellido: '+${usuario.apellido}"></li>
														<li class="list-group-item"
															th:text="'Email: '+${usuario.email}"></li>
														<li class="list-group-item" th:text="${usuario.createAt}"></li>
													</ul>

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>






							<!-----------------ENLACE A CREAR TAREAS-------------------------------------->


							<h4 class="card-title text-center my-4">
								<a sec:authorize="hasRole('ROLE_ADVANCED_USER')"
									th:href="@{'/tarea/form/' + ${usuario.id}}"
									class="btn btn-secondary d-block mx-auto">crear Tarea</a>
							</h4>

							<!----------------------MOSTRAR PUBICACIONES--------------------------------------------------->

							<div th:if="${#lists.isEmpty(usuario.tareas)}"
								class="alert alert-info my-4"
								th:text="'No hay tareas asignadas en el usuario ' + ${usuario.nombre}"></div>

							<table th:if="${not #lists.isEmpty(usuario.tareas)}"
								class="table table-striped my-4 ">
								<thead class="thead-dark">
									<tr>
										<th class="text-warning">Fecha</th>
										<th class="text-warning">Título</th>
										<th></th>
										<th></th>
									</tr>
								</thead>
								<tbody class="text-light">
									<tr th:each="tarea : ${usuario.tareas}">
										<td th:text="${tarea.createAt}"></td>
										<td th:text="${tarea.titulo}"></td>
										<td><a class="btn btn-primary btn-sm"
											th:href="@{'/tarea/ver/' + ${tarea.id}}"
											th:text="'detalle'"></a></td>
										<td><a sec:authorize="hasRole('ROLE_ADMIN')"
											class="btn btn-danger btn-sm"
											th:href="@{'/tarea/eliminar/' + ${tarea.id}}"
											th:text="'eliminar'"
											onclick="return confirm('Estás seguro que deseas eliminar el usuario?');"></a></td>

									</tr>
								</tbody>

							</table>


						</div>
					</div>
					<!-------------------------BOTÓN VOLVER ------------------------------------------------------->
					<h4 class="card-title mx-5">
						<a class="btn btn-outline-light px-5"
							th:href="@{'/usuario/listar/'}" th:text="'&laquo; usuarios'"></a>
					</h4>
					<br>
				</div>

			</div>

		</div>

	</div>

	<footer th:replace="plantilla/plantilla :: footer"></footer>

</body>
</html>